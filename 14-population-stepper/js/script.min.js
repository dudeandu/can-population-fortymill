/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */
function exists(e) {
  return void 0 !== e && null != e
}

function translateRange(e, t, n, o, r) {
  return (r - o) / (n - t) * (e - t) + o
}

function zoomableImageSetup(e) {
  e.matches ? mediumZoom(document.querySelectorAll(".SA_zoomable"), {
      background: "#000"
  }) : mediumZoom(document.querySelectorAll(".SA_zoomable"), {
      margin: 25,
      container: {
          top: 0
      },
      background: "#000"
  })
}

function adjustForNav() {
  if (exists(document.querySelector(".o-main-menu"))) {
      if (document.querySelector(".o-main-menu").getBoundingClientRect().height > 0) {
          var e = document.querySelector(".o-main-menu").getBoundingClientRect().height;
          document.querySelector("#SA_overlay").style.paddingTop = e + "px", document.querySelector("#SA_close").style.marginTop = e + "px";
          for (var t = (n = document.querySelectorAll(".SA_fullscreen-image")).length - 1; t >= 0; t--) n[t].style.paddingTop = e + "px"
      }
  } else if (exists(document.querySelector(".o-header-mobile")) && document.querySelector(".o-header-mobile").getBoundingClientRect().height > 0) {
      e = document.querySelector(".o-header-mobile").getBoundingClientRect().height;
      document.querySelector("#SA_overlay").style.paddingTop = e + "px", document.querySelector("#SA_close").style.marginTop = e + "px";
      var n;
      for (t = (n = document.querySelectorAll(".SA_fullscreen-image")).length - 1; t >= 0; t--) n[t].style.paddingTop = e + "px"
  }
}! function(e, t) {
  "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).mediumZoom = t()
}(this, (function() {
  "use strict";
  var e = Object.assign || function(e) {
          for (var t = 1; t < arguments.length; t++) {
              var n = arguments[t];
              for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o])
          }
          return e
      },
      t = function(e) {
          return "IMG" === e.tagName
      },
      n = function(e) {
          return e && 1 === e.nodeType
      },
      o = function(e) {
          return ".svg" === (e.currentSrc || e.src).substr(-4).toLowerCase()
      },
      r = function(e) {
          try {
              return Array.isArray(e) ? e.filter(t) : function(e) {
                  return NodeList.prototype.isPrototypeOf(e)
              }(e) ? [].slice.call(e).filter(t) : n(e) ? [e].filter(t) : "string" == typeof e ? [].slice.call(document.querySelectorAll(e)).filter(t) : []
          } catch (e) {
              throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")
          }
      },
      i = function(e) {
          var t = document.createElement("div");
          return t.classList.add("SA_medium-zoom-overlay"), t.style.background = e, t
      },
      a = function(e) {
          var t = e.getBoundingClientRect(),
              n = t.top,
              o = t.left,
              r = t.width,
              i = t.height,
              a = e.cloneNode(),
              s = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0,
              l = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
          return a.removeAttribute("id"), a.style.position = "absolute", a.style.top = n + s + "px", a.style.left = o + l + "px", a.style.width = r + "px", a.style.height = i + "px", a.style.transform = "", a
      },
      s = function(t, n) {
          var o = e({
              bubbles: !1,
              cancelable: !1,
              detail: void 0
          }, n);
          if ("function" == typeof window.CustomEvent) return new CustomEvent(t, o);
          var r = document.createEvent("CustomEvent");
          return r.initCustomEvent(t, o.bubbles, o.cancelable, o.detail), r
      };
  return function(e, t) {
          void 0 === t && (t = {});
          var n = t.insertAt;
          if ("undefined" != typeof document) {
              var o = document.head || document.getElementsByTagName("head")[0],
                  r = document.createElement("style");
              r.type = "text/css", "top" === n && o.firstChild ? o.insertBefore(r, o.firstChild) : o.appendChild(r), r.styleSheet ? r.styleSheet.cssText = e : r.appendChild(document.createTextNode(e))
          }
      }(".SA_medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.SA_medium-zoom--opened .SA_medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.SA_medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.SA_medium-zoom-image--hidden{visibility:hidden}.SA_medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),
      function t(l) {
          var c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
              d = window.Promise || function(e) {
                  function t() {}
                  e(t, t)
              },
              u = function(e) {
                  var t = e.target;
                  t !== q ? -1 !== _.indexOf(t) && E({
                      target: t
                  }) : S()
              },
              m = function() {
                  if (!L && N.original) {
                      var e = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                      Math.abs(H - e) > T.scrollOffset && setTimeout(S, 150)
                  }
              },
              p = function(e) {
                  var t = e.key || e.keyCode;
                  "Escape" !== t && "Esc" !== t && 27 !== t || S()
              },
              f = function() {
                  var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                      o = t;
                  if (t.background && (q.style.background = t.background), t.container && t.container instanceof Object && (o.container = e({}, T.container, t.container)), t.template) {
                      var r = n(t.template) ? t.template : document.querySelector(t.template);
                      o.template = r
                  }
                  return T = e({}, T, o), _.forEach((function(e) {
                      e.dispatchEvent(s("medium-zoom:update", {
                          detail: {
                              zoom: k
                          }
                      }))
                  })), k
              },
              g = function() {
                  var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                  return t(e({}, T, n))
              },
              h = function() {
                  for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                  var o = t.reduce((function(e, t) {
                      return [].concat(e, r(t))
                  }), []);
                  return o.filter((function(e) {
                      return -1 === _.indexOf(e)
                  })).forEach((function(e) {
                      _.push(e), e.classList.add("SA_medium-zoom-image")
                  })), C.forEach((function(e) {
                      var t = e.type,
                          n = e.listener,
                          r = e.options;
                      o.forEach((function(e) {
                          e.addEventListener(t, n, r)
                      }))
                  })), k
              },
              v = function() {
                  for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                  N.zoomed && S();
                  var o = t.length > 0 ? t.reduce((function(e, t) {
                      return [].concat(e, r(t))
                  }), []) : _;
                  return o.forEach((function(e) {
                      e.classList.remove("SA_medium-zoom-image"), e.dispatchEvent(s("medium-zoom:detach", {
                          detail: {
                              zoom: k
                          }
                      }))
                  })), _ = _.filter((function(e) {
                      return -1 === o.indexOf(e)
                  })), k
              },
              y = function(e, t) {
                  var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                  return _.forEach((function(o) {
                      o.addEventListener("medium-zoom:" + e, t, n)
                  })), C.push({
                      type: "medium-zoom:" + e,
                      listener: t,
                      options: n
                  }), k
              },
              b = function(e, t) {
                  var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                  return _.forEach((function(o) {
                      o.removeEventListener("medium-zoom:" + e, t, n)
                  })), C = C.filter((function(n) {
                      return !(n.type === "medium-zoom:" + e && n.listener.toString() === t.toString())
                  })), k
              },
              z = function() {
                  var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                      r = t.target,
                      i = function() {
                          var t = {
                                  width: document.documentElement.clientWidth,
                                  height: document.documentElement.clientHeight,
                                  left: 0,
                                  top: 0,
                                  right: 0,
                                  bottom: 0
                              },
                              r = void 0,
                              i = void 0;
                          if (T.container)
                              if (T.container instanceof Object) r = (t = e({}, t, T.container)).width - t.left - t.right - 2 * T.margin, i = t.height - t.top - t.bottom - 2 * T.margin;
                              else {
                                  var a = (n(T.container) ? T.container : document.querySelector(T.container)).getBoundingClientRect(),
                                      s = a.width,
                                      l = a.height,
                                      c = a.left,
                                      d = a.top;
                                  t = e({}, t, {
                                      width: s,
                                      height: l,
                                      left: c,
                                      top: d
                                  })
                              }
                          r = r || t.width - 2 * T.margin, i = i || t.height - 2 * T.margin;
                          var u = N.zoomedHd || N.original,
                              m = o(u) ? r : u.naturalWidth || r,
                              p = o(u) ? i : u.naturalHeight || i,
                              f = u.getBoundingClientRect(),
                              g = f.top,
                              h = f.left,
                              v = f.width,
                              y = f.height,
                              b = Math.min(m, r) / v,
                              z = Math.min(p, i) / y,
                              S = Math.min(b, z),
                              E = "scale(" + S + ") translate3d(" + ((r - v) / 2 - h + T.margin + t.left) / S + "px, " + ((i - y) / 2 - g + T.margin + t.top) / S + "px, 0)";
                          N.zoomed.style.transform = E, N.zoomedHd && (N.zoomedHd.style.transform = E)
                      };
                  return new d((function(e) {
                      if (r && -1 === _.indexOf(r)) e(k);
                      else if (N.zoomed) e(k);
                      else {
                          if (r) N.original = r;
                          else {
                              if (!(_.length > 0)) return void e(k);
                              var t = _;
                              N.original = t[0]
                          }
                          if (N.original.dispatchEvent(s("medium-zoom:open", {
                                  detail: {
                                      zoom: k
                                  }
                              })), H = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0, L = !0, N.zoomed = a(N.original), document.body.appendChild(q), T.template) {
                              var o = n(T.template) ? T.template : document.querySelector(T.template);
                              N.template = document.createElement("div"), N.template.appendChild(o.content.cloneNode(!0)), document.body.appendChild(N.template)
                          }
                          if (document.body.appendChild(N.zoomed), window.requestAnimationFrame((function() {
                                  document.body.classList.add("SA_medium-zoom--opened")
                              })), N.original.classList.add("SA_medium-zoom-image--hidden"), N.zoomed.classList.add("SA_medium-zoom-image--opened"), N.zoomed.addEventListener("click", S), N.zoomed.addEventListener("transitionend", (function t() {
                                  L = !1, N.zoomed.removeEventListener("transitionend", t), N.original.dispatchEvent(s("medium-zoom:opened", {
                                      detail: {
                                          zoom: k
                                      }
                                  })), e(k)
                              })), N.original.getAttribute("data-zoom-src")) {
                              N.zoomedHd = N.zoomed.cloneNode(), N.zoomedHd.removeAttribute("srcset"), N.zoomedHd.removeAttribute("sizes"), N.zoomedHd.src = N.zoomed.getAttribute("data-zoom-src"), N.zoomedHd.onerror = function() {
                                  clearInterval(l), console.warn("Unable to reach the zoom image target " + N.zoomedHd.src), N.zoomedHd = null, i()
                              };
                              var l = setInterval((function() {
                                  N.zoomedHd.complete && (clearInterval(l), N.zoomedHd.classList.add("SA_medium-zoom-image--opened"), N.zoomedHd.addEventListener("click", S), document.body.appendChild(N.zoomedHd), i())
                              }), 10)
                          } else if (N.original.hasAttribute("srcset")) {
                              N.zoomedHd = N.zoomed.cloneNode(), N.zoomedHd.removeAttribute("sizes"), N.zoomedHd.removeAttribute("loading");
                              var c = N.zoomedHd.addEventListener("load", (function() {
                                  N.zoomedHd.removeEventListener("load", c), N.zoomedHd.classList.add("SA_medium-zoom-image--opened"), N.zoomedHd.addEventListener("click", S), document.body.appendChild(N.zoomedHd), i()
                              }))
                          } else i()
                      }
                  }))
              },
              S = function() {
                  return new d((function(e) {
                      !L && N.original ? (L = !0, document.body.classList.remove("SA_medium-zoom--opened"), N.zoomed.style.transform = "", N.zoomedHd && (N.zoomedHd.style.transform = ""), N.template && (N.template.style.transition = "opacity 150ms", N.template.style.opacity = 0), N.original.dispatchEvent(s("medium-zoom:close", {
                          detail: {
                              zoom: k
                          }
                      })), N.zoomed.addEventListener("transitionend", (function t() {
                          N.original.classList.remove("SA_medium-zoom-image--hidden"), document.body.removeChild(N.zoomed), N.zoomedHd && document.body.removeChild(N.zoomedHd), document.body.removeChild(q), N.zoomed.classList.remove("SA_medium-zoom-image--opened"), N.template && document.body.removeChild(N.template), L = !1, N.zoomed.removeEventListener("transitionend", t), N.original.dispatchEvent(s("medium-zoom:closed", {
                              detail: {
                                  zoom: k
                              }
                          })), N.original = null, N.zoomed = null, N.zoomedHd = null, N.template = null, e(k)
                      }))) : e(k)
                  }))
              },
              E = function() {
                  var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                      t = e.target;
                  return N.original ? S() : z({
                      target: t
                  })
              },
              A = function() {
                  return T
              },
              x = function() {
                  return _
              },
              w = function() {
                  return N.original
              },
              _ = [],
              C = [],
              L = !1,
              H = 0,
              T = c,
              N = {
                  original: null,
                  zoomed: null,
                  zoomedHd: null,
                  template: null
              };
          "[object Object]" === Object.prototype.toString.call(l) ? T = l : (l || "string" == typeof l) && h(l), T = e({
              margin: 0,
              background: "#fff",
              scrollOffset: 40,
              container: null,
              template: null
          }, T);
          var q = i(T.background);
          document.addEventListener("click", u), document.addEventListener("keyup", p), document.addEventListener("scroll", m), window.addEventListener("resize", S);
          var k = {
              open: z,
              close: S,
              toggle: E,
              update: f,
              clone: g,
              attach: h,
              detach: v,
              on: y,
              off: b,
              getOptions: A,
              getImages: x,
              getZoomedImage: w
          };
          return k
      }
})),
function(e, t) {
  "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).scrollama = t()
}(this, (function() {
  "use strict";

  function e(e) {
      console.error(`scrollama error: ${e}`)
  }

  function t(e) {
      return +e.getAttribute("data-scrollama-index")
  }

  function n(e) {
      if ("string" == typeof e && 0 < e.indexOf("px")) {
          var t = +e.replace("px", "");
          return isNaN(t) ? (err("offset value must be in 'px' format. Fallback to 0.5."), {
              format: "percent",
              value: .5
          }) : {
              format: "pixels",
              value: t
          }
      }
      return "number" != typeof e && isNaN(+e) ? null : (1 < e && err("offset value is greater than 1. Fallback to 1."), e < 0 && err("offset value is lower than 0. Fallback to 0."), {
          format: "percent",
          value: Math.min(Math.max(0, e), 1)
      })
  }
  let o, r, i;

  function a(e) {
      e = e ? e.scrollTop : window.pageYOffset, o !== e && (o = e, o > r ? i = "down" : o < r && (i = "up"), r = o)
  }
  return function() {
      let s, l, c, d = {},
          u = function() {
              var e = "abcdefghijklmnopqrstuvwxyz",
                  t = Date.now();
              const n = [];
              for (let t = 0; t < 6; t += 1) {
                  var o = e[Math.floor(Math.random() * e.length)];
                  n.push(o)
              }
              return `${n.join("")}${t}`
          }(),
          m = [],
          p = 0,
          f = !1,
          g = !1,
          h = !1,
          v = !1,
          y = [];

      function b() {
          d = {
              stepEnter: () => {},
              stepExit: () => {},
              stepProgress: () => {}
          }, y = []
      }

      function z(e) {
          e && !f && T(), !e && f && _(), f = e
      }

      function S(e, n) {
          var o = t(e);
          const r = m[o];
          void 0 !== n && (r.progress = n), n = {
              element: e,
              index: o,
              progress: n,
              direction: i
          }, "enter" === r.state && d.stepProgress(n)
      }

      function E([e]) {
          var n = t(e.target);
          const o = m[n];
          (e = e.target.offsetHeight) !== o.height && (o.height = e, w(o), L(o), C(o))
      }

      function A([e]) {
          a(l);
          var {
              isIntersecting: n,
              target: e
          } = e;
          (n ? function(e) {
              var n = t(e);
              const o = m[n];
              e = {
                  element: e,
                  index: n,
                  direction: i
              }, o.direction = i, o.state = "enter", y[n] || d.stepEnter(e), v && (y[n] = !0)
          } : function(e) {
              var n = t(e);
              const o = m[n];
              o.state && (n = {
                  element: e,
                  index: n,
                  direction: i
              }, g && ("down" === i && o.progress < 1 ? S(e, 1) : "up" === i && 0 < o.progress && S(e, 0)), o.direction = i, o.state = "exit", d.stepExit(n))
          })(e)
      }

      function x([e]) {
          var n = t(e.target),
              o = m[n],
              {
                  isIntersecting: r,
                  intersectionRatio: n,
                  target: e
              } = e;
          r && "enter" === o.state && S(e, n)
      }

      function w({
          observers: e
      }) {
          Object.keys(e).map((t => {
              e[t].disconnect()
          }))
      }

      function _() {
          m.forEach(w)
      }

      function C(e) {
          const t = new ResizeObserver(E);
          t.observe(e.node), e.observers.resize = t
      }

      function L(e) {
          var t, n = window.innerHeight,
              o = "pixels" === (t = e.offset || s).format ? 1 : n,
              r = t.value * o;
          n = `${t=e.height/2-r}px 0px ${o=e.height/2-(n-r)}px 0px`, r = c;
          const i = new IntersectionObserver(A, {
              rootMargin: n,
              threshold: .5,
              root: r
          });
          i.observe(e.node), e.observers.step = i, h && function({
              id: e,
              step: t,
              marginTop: n
          }) {
              var {
                  index: o,
                  height: t
              } = t, o = `scrollama__debug-step--${e}-${o}`;
              let r = document.querySelector(`.${o}`);
              r = r || function(e) {
                  const t = document.createElement("div");
                  t.className = `scrollama__debug-step ${e}`, t.style.position = "fixed", t.style.left = "0", t.style.width = "100%", t.style.zIndex = "9999", t.style.borderTop = "2px solid black", t.style.borderBottom = "2px solid black";
                  const n = document.createElement("p");
                  return n.style.position = "absolute", n.style.left = "0", n.style.height = "1px", n.style.width = "100%", n.style.borderTop = "1px dashed black", t.appendChild(n), document.body.appendChild(t), t
              }(o), r.style.top = -1 * n + "px", r.style.height = `${t}px`, r.querySelector("p").style.top = t / 2 + "px"
          }({
              id: u,
              step: e,
              marginTop: t,
              marginBottom: o
          })
      }

      function H(e) {
          var t = window.innerHeight,
              n = e.offset || s,
              o = "pixels" === n.format ? 1 : t;
          o = `${-(o=n.value*o)+e.height}px 0px ${o-t}px 0px`, t = function(e, t) {
              var n = Math.ceil(e / t);
              const o = [];
              var r = 1 / n;
              for (let e = 0; e < n + 1; e += 1) o.push(e * r);
              return o
          }(e.height, p);
          const r = new IntersectionObserver(x, {
              rootMargin: o,
              threshold: t
          });
          r.observe(e.node), e.observers.progress = r
      }

      function T() {
          _(), m.forEach(C), m.forEach(L), g && m.forEach(H)
      }
      const N = {
          setup: ({
              step: t,
              parent: i,
              offset: d = .5,
              threshold: u = 4,
              progress: f = !1,
              once: y = !1,
              debug: S = !1,
              container: E,
              root: A = null
          }) => {
              var x;
              return x = E, o = 0, r = 0, document.addEventListener("scroll", (() => a(x))), [t, i = document] = [t, i], m = ("string" == typeof t ? Array.from(i.querySelectorAll(t)) : t instanceof Element ? [t] : t instanceof NodeList ? Array.from(t) : t instanceof Array ? t : []).map(((e, t) => ({
                  index: t,
                  direction: void 0,
                  height: e.offsetHeight,
                  node: e,
                  observers: {},
                  offset: n(e.dataset.offset),
                  top: function(e) {
                      var {
                          top: e
                      } = e.getBoundingClientRect();
                      return e + window.pageYOffset - (document.body.clientTop || 0)
                  }(e),
                  progress: 0,
                  state: void 0
              }))), m.length ? (g = f, v = y, h = S, p = Math.max(1, +u), s = n(d), l = E, c = A, b(), m.forEach((e => e.node.setAttribute("data-scrollama-index", e.index))), z(!0)) : e("no step elements"), N
          },
          enable: () => (z(!0), N),
          disable: () => (z(!1), N),
          destroy: () => (z(!1), b(), N),
          resize: () => (T(), N),
          offset: e => null == e ? s.value : (s = n(e), T(), N),
          onStepEnter: t => ("function" == typeof t ? d.stepEnter = t : e("onStepEnter requires a function"), N),
          onStepExit: t => ("function" == typeof t ? d.stepExit = t : e("onStepExit requires a function"), N),
          onStepProgress: t => ("function" == typeof t ? d.stepProgress = t : e("onStepProgress requires a function"), N)
      };
      return N
  }
})),
function(e) {
  var t = function(e, t, n) {
      "use strict";
      var o, r;
      if (function() {
              var t, n = {
                  lazyClass: "lazyload",
                  loadedClass: "lazyloaded",
                  loadingClass: "lazyloading",
                  preloadClass: "lazypreload",
                  errorClass: "lazyerror",
                  autosizesClass: "lazyautosizes",
                  fastLoadedClass: "ls-is-cached",
                  iframeLoadMode: 0,
                  srcAttr: "data-src",
                  srcsetAttr: "data-srcset",
                  sizesAttr: "data-sizes",
                  minSize: 40,
                  customMedia: {},
                  init: !0,
                  expFactor: 1.5,
                  hFac: .8,
                  loadMode: 2,
                  loadHidden: !0,
                  ricTimeout: 0,
                  throttleDelay: 125
              };
              for (t in r = e.lazySizesConfig || e.lazysizesConfig || {}, n) t in r || (r[t] = n[t])
          }(), !t || !t.getElementsByClassName) return {
          init: function() {},
          cfg: r,
          noSupport: !0
      };
      var i = t.documentElement,
          a = e.HTMLPictureElement,
          s = "addEventListener",
          l = "getAttribute",
          c = e[s].bind(e),
          d = e.setTimeout,
          u = e.requestAnimationFrame || d,
          m = e.requestIdleCallback,
          p = /^picture$/i,
          f = ["load", "error", "lazyincluded", "_lazyloaded"],
          g = {},
          h = Array.prototype.forEach,
          v = function(e, t) {
              return g[t] || (g[t] = new RegExp("(\\s|^)" + t + "(\\s|$)")), g[t].test(e[l]("class") || "") && g[t]
          },
          y = function(e, t) {
              v(e, t) || e.setAttribute("class", (e[l]("class") || "").trim() + " " + t)
          },
          b = function(e, t) {
              var n;
              (n = v(e, t)) && e.setAttribute("class", (e[l]("class") || "").replace(n, " "))
          },
          z = function(e, t, n) {
              var o = n ? s : "removeEventListener";
              n && z(e, t), f.forEach((function(n) {
                  e[o](n, t)
              }))
          },
          S = function(e, n, r, i, a) {
              var s = t.createEvent("Event");
              return r || (r = {}), r.instance = o, s.initEvent(n, !i, !a), s.detail = r, e.dispatchEvent(s), s
          },
          E = function(t, n) {
              var o;
              !a && (o = e.picturefill || r.pf) ? (n && n.src && !t[l]("srcset") && t.setAttribute("srcset", n.src), o({
                  reevaluate: !0,
                  elements: [t]
              })) : n && n.src && (t.src = n.src)
          },
          A = function(e, t) {
              return (getComputedStyle(e, null) || {})[t]
          },
          x = function(e, t, n) {
              for (n = n || e.offsetWidth; n < r.minSize && t && !e._lazysizesWidth;) n = t.offsetWidth, t = t.parentNode;
              return n
          },
          w = function() {
              var e, n, o = [],
                  r = [],
                  i = o,
                  a = function() {
                      var t = i;
                      for (i = o.length ? r : o, e = !0, n = !1; t.length;) t.shift()();
                      e = !1
                  },
                  s = function(o, r) {
                      e && !r ? o.apply(this, arguments) : (i.push(o), n || (n = !0, (t.hidden ? d : u)(a)))
                  };
              return s._lsFlush = a, s
          }(),
          _ = function(e, t) {
              return t ? function() {
                  w(e)
              } : function() {
                  var t = this,
                      n = arguments;
                  w((function() {
                      e.apply(t, n)
                  }))
              }
          },
          C = function(e) {
              var t, o = 0,
                  i = r.throttleDelay,
                  a = r.ricTimeout,
                  s = function() {
                      t = !1, o = n.now(), e()
                  },
                  l = m && a > 49 ? function() {
                      m(s, {
                          timeout: a
                      }), a !== r.ricTimeout && (a = r.ricTimeout)
                  } : _((function() {
                      d(s)
                  }), !0);
              return function(e) {
                  var r;
                  (e = !0 === e) && (a = 33), t || (t = !0, (r = i - (n.now() - o)) < 0 && (r = 0), e || r < 9 ? l() : d(l, r))
              }
          },
          L = function(e) {
              var t, o, r = function() {
                      t = null, e()
                  },
                  i = function() {
                      var e = n.now() - o;
                      e < 99 ? d(i, 99 - e) : (m || r)(r)
                  };
              return function() {
                  o = n.now(), t || (t = d(i, 99))
              }
          },
          H = function() {
              var a, m, f, g, x, H, N, q, k, M, O, B, P = /^img$/i,
                  F = /^iframe$/i,
                  R = "onscroll" in e && !/(gle|ing)bot/.test(navigator.userAgent),
                  j = 0,
                  I = 0,
                  $ = -1,
                  W = function(e) {
                      I--, (!e || I < 0 || !e.target) && (I = 0)
                  },
                  D = function(e) {
                      return null == B && (B = "hidden" == A(t.body, "visibility")), B || !("hidden" == A(e.parentNode, "visibility") && "hidden" == A(e, "visibility"))
                  },
                  U = function(e, n) {
                      var o, r = e,
                          a = D(e);
                      for (q -= n, O += n, k -= n, M += n; a && (r = r.offsetParent) && r != t.body && r != i;)(a = (A(r, "opacity") || 1) > 0) && "visible" != A(r, "overflow") && (o = r.getBoundingClientRect(), a = M > o.left && k < o.right && O > o.top - 1 && q < o.bottom + 1);
                      return a
                  },
                  Y = function() {
                      var e, n, s, c, d, u, p, f, h, v, y, b, z = o.elements;
                      if ((g = r.loadMode) && I < 8 && (e = z.length)) {
                          for (n = 0, $++; n < e; n++)
                              if (z[n] && !z[n]._lazyRace)
                                  if (!R || o.prematureUnveil && o.prematureUnveil(z[n])) V(z[n]);
                                  else if ((f = z[n][l]("data-expand")) && (u = 1 * f) || (u = j), v || (v = !r.expand || r.expand < 1 ? i.clientHeight > 500 && i.clientWidth > 500 ? 500 : 370 : r.expand, o._defEx = v, y = v * r.expFactor, b = r.hFac, B = null, j < y && I < 1 && $ > 2 && g > 2 && !t.hidden ? (j = y, $ = 0) : j = g > 1 && $ > 1 && I < 6 ? v : 0), h !== u && (H = innerWidth + u * b, N = innerHeight + u, p = -1 * u, h = u), s = z[n].getBoundingClientRect(), (O = s.bottom) >= p && (q = s.top) <= N && (M = s.right) >= p * b && (k = s.left) <= H && (O || M || k || q) && (r.loadHidden || D(z[n])) && (m && I < 3 && !f && (g < 3 || $ < 4) || U(z[n], u))) {
                              if (V(z[n]), d = !0, I > 9) break
                          } else !d && m && !c && I < 4 && $ < 4 && g > 2 && (a[0] || r.preloadAfterLoad) && (a[0] || !f && (O || M || k || q || "auto" != z[n][l](r.sizesAttr))) && (c = a[0] || z[n]);
                          c && !d && V(c)
                      }
                  },
                  X = C(Y),
                  Z = function(e) {
                      var t = e.target;
                      t._lazyCache ? delete t._lazyCache : (W(e), y(t, r.loadedClass), b(t, r.loadingClass), z(t, G), S(t, "lazyloaded"))
                  },
                  J = _(Z),
                  G = function(e) {
                      J({
                          target: e.target
                      })
                  },
                  Q = function(e) {
                      var t, n = e[l](r.srcsetAttr);
                      (t = r.customMedia[e[l]("data-media") || e[l]("media")]) && e.setAttribute("media", t), n && e.setAttribute("srcset", n)
                  },
                  K = _((function(e, t, n, o, i) {
                      var a, s, c, u, m, g;
                      (m = S(e, "lazybeforeunveil", t)).defaultPrevented || (o && (n ? y(e, r.autosizesClass) : e.setAttribute("sizes", o)), s = e[l](r.srcsetAttr), a = e[l](r.srcAttr), i && (u = (c = e.parentNode) && p.test(c.nodeName || "")), g = t.firesLoad || "src" in e && (s || a || u), m = {
                          target: e
                      }, y(e, r.loadingClass), g && (clearTimeout(f), f = d(W, 2500), z(e, G, !0)), u && h.call(c.getElementsByTagName("source"), Q), s ? e.setAttribute("srcset", s) : a && !u && (F.test(e.nodeName) ? function(e, t) {
                          var n = e.getAttribute("data-load-mode") || r.iframeLoadMode;
                          0 == n ? e.contentWindow.location.replace(t) : 1 == n && (e.src = t)
                      }(e, a) : e.src = a), i && (s || u) && E(e, {
                          src: a
                      })), e._lazyRace && delete e._lazyRace, b(e, r.lazyClass), w((function() {
                          var t = e.complete && e.naturalWidth > 1;
                          g && !t || (t && y(e, r.fastLoadedClass), Z(m), e._lazyCache = !0, d((function() {
                              "_lazyCache" in e && delete e._lazyCache
                          }), 9)), "lazy" == e.loading && I--
                      }), !0)
                  })),
                  V = function(e) {
                      if (!e._lazyRace) {
                          var t, n = P.test(e.nodeName),
                              o = n && (e[l](r.sizesAttr) || e[l]("sizes")),
                              i = "auto" == o;
                          (!i && m || !n || !e[l]("src") && !e.srcset || e.complete || v(e, r.errorClass) || !v(e, r.lazyClass)) && (t = S(e, "lazyunveilread").detail, i && T.updateElem(e, !0, e.offsetWidth), e._lazyRace = !0, I++, K(e, t, i, o, n))
                      }
                  },
                  ee = L((function() {
                      r.loadMode = 3, X()
                  })),
                  te = function() {
                      3 == r.loadMode && (r.loadMode = 2), ee()
                  },
                  ne = function() {
                      m || (n.now() - x < 999 ? d(ne, 999) : (m = !0, r.loadMode = 3, X(), c("scroll", te, !0)))
                  };
              return {
                  _: function() {
                      x = n.now(), o.elements = t.getElementsByClassName(r.lazyClass), a = t.getElementsByClassName(r.lazyClass + " " + r.preloadClass), c("scroll", X, !0), c("resize", X, !0), c("pageshow", (function(e) {
                          if (e.persisted) {
                              var n = t.querySelectorAll("." + r.loadingClass);
                              n.length && n.forEach && u((function() {
                                  n.forEach((function(e) {
                                      e.complete && V(e)
                                  }))
                              }))
                          }
                      })), e.MutationObserver ? new MutationObserver(X).observe(i, {
                          childList: !0,
                          subtree: !0,
                          attributes: !0
                      }) : (i[s]("DOMNodeInserted", X, !0), i[s]("DOMAttrModified", X, !0), setInterval(X, 999)), c("hashchange", X, !0), ["focus", "mouseover", "click", "load", "transitionend", "animationend"].forEach((function(e) {
                          t[s](e, X, !0)
                      })), /d$|^c/.test(t.readyState) ? ne() : (c("load", ne), t[s]("DOMContentLoaded", X), d(ne, 2e4)), o.elements.length ? (Y(), w._lsFlush()) : X()
                  },
                  checkElems: X,
                  unveil: V,
                  _aLSL: te
              }
          }(),
          T = function() {
              var e, n = _((function(e, t, n, o) {
                      var r, i, a;
                      if (e._lazysizesWidth = o, o += "px", e.setAttribute("sizes", o), p.test(t.nodeName || ""))
                          for (i = 0, a = (r = t.getElementsByTagName("source")).length; i < a; i++) r[i].setAttribute("sizes", o);
                      n.detail.dataAttr || E(e, n.detail)
                  })),
                  o = function(e, t, o) {
                      var r, i = e.parentNode;
                      i && (o = x(e, i, o), (r = S(e, "lazybeforesizes", {
                          width: o,
                          dataAttr: !!t
                      })).defaultPrevented || (o = r.detail.width) && o !== e._lazysizesWidth && n(e, i, r, o))
                  },
                  i = L((function() {
                      var t, n = e.length;
                      if (n)
                          for (t = 0; t < n; t++) o(e[t])
                  }));
              return {
                  _: function() {
                      e = t.getElementsByClassName(r.autosizesClass), c("resize", i)
                  },
                  checkElems: i,
                  updateElem: o
              }
          }(),
          N = function() {
              !N.i && t.getElementsByClassName && (N.i = !0, T._(), H._())
          };
      return d((function() {
          r.init && N()
      })), o = {
          cfg: r,
          autoSizer: T,
          loader: H,
          init: N,
          uP: E,
          aC: y,
          rC: b,
          hC: v,
          fire: S,
          gW: x,
          rAF: w
      }
  }(e, e.document, Date);
  e.lazySizes = t, "object" == typeof module && module.exports && (module.exports = t)
}("undefined" != typeof window ? window : {}),
function(e, t) {
  var n;
  e && (n = function() {
      t(e.lazySizes), e.removeEventListener("lazyunveilread", n, !0)
  }, t = t.bind(null, e, e.document), "object" == typeof module && module.exports ? t(require("lazysizes")) : "function" == typeof define && define.amd ? define(["lazysizes"], t) : e.lazySizes ? n() : e.addEventListener("lazyunveilread", n, !0))
}("undefined" != typeof window ? window : 0, (function(e, t, n) {
  "use strict";
  var o, r, i, a, s, l, c, d, u, m, p, f = n.cfg,
      g = t.createElement("img"),
      h = "sizes" in g && "srcset" in g,
      v = /\s+\d+h/g,
      y = (r = /\s+(\d+)(w|h)\s+(\d+)(w|h)/, i = Array.prototype.forEach, function() {
          function e(e) {
              var t, n, o = e.getAttribute(f.srcsetAttr);
              o && (n = o.match(r)) && ((t = "w" == n[2] ? n[1] / n[3] : n[3] / n[1]) && e.setAttribute("data-aspectratio", t), e.setAttribute(f.srcsetAttr, o.replace(v, "")))
          }

          function o(t) {
              var o;
              t.detail.instance == n && ((o = t.target.parentNode) && "PICTURE" == o.nodeName && i.call(o.getElementsByTagName("source"), e), e(t.target))
          }

          function a() {
              s.currentSrc && t.removeEventListener("lazybeforeunveil", o)
          }
          var s = t.createElement("img");
          t.addEventListener("lazybeforeunveil", o), s.onload = a, s.onerror = a, s.srcset = "data:,a 1w 1h", s.complete && a()
      });

  function b(e, t) {
      return e.w - t.w
  }

  function z(e, t, n, o) {
      a.push({
          c: t,
          u: n,
          w: +o
      })
  }

  function S(t, o) {
      var r, i = t.getAttribute("srcset") || t.getAttribute(f.srcsetAttr);
      !i && o && (i = t._lazypolyfill ? t._lazypolyfill._set : t.getAttribute(f.srcAttr) || t.getAttribute("src")), t._lazypolyfill && t._lazypolyfill._set == i || (r = d(i || ""), o && t.parentNode && (r.isPicture = "PICTURE" == t.parentNode.nodeName.toUpperCase(), r.isPicture && e.matchMedia && (n.aC(t, "lazymatchmedia"), u())), r._set = i, Object.defineProperty(t, "_lazypolyfill", {
          value: r,
          writable: !0
      }))
  }

  function E(t) {
      var o;
      h && t.parentNode && "PICTURE" != t.parentNode.nodeName.toUpperCase() || (o = function(t) {
          var o, r, i, a, s, l, d, u, p, g = t;
          if (S(g, !0), (a = g._lazypolyfill).isPicture)
              for (r = 0, i = (o = t.parentNode.getElementsByTagName("source")).length; r < i; r++)
                  if (f.supportsType(o[r].getAttribute("type"), t) && m(o[r].getAttribute("media"))) {
                      S(g = o[r]), a = g._lazypolyfill;
                      break
                  }
          return 1 < a.length ? (l = g.getAttribute("sizes") || "", l = c.test(l) && parseInt(l, 10) || n.gW(t, t.parentNode), a.d = (d = t, u = e.devicePixelRatio || 1, p = n.getX && n.getX(d), Math.min(p || u, 2.5, u)), !a.src || !a.w || a.w < l ? (a.w = l, s = function(e) {
              for (var t, n, o = e.length, r = e[o - 1], i = 0; i < o; i++)
                  if ((r = e[i]).d = r.w / e.w, r.d >= e.d) {
                      !r.cached && (t = e[i - 1]) && t.d > e.d - .13 * Math.pow(e.d, 2.2) && (n = Math.pow(t.d - .6, 1.6), t.cached && (t.d += .15 * n), t.d + (r.d - e.d) * n > e.d && (r = t));
                      break
                  }
              return r
          }(a.sort(b)), a.src = s) : s = a.src) : s = a[0], s
      }(t)) && o.u && t._lazypolyfill.cur != o.u && (t._lazypolyfill.cur = o.u, o.cached = !0, t.setAttribute(f.srcAttr, o.u), t.setAttribute("src", o.u))
  }
  f.supportsType || (f.supportsType = function(e) {
      return !e
  }), e.HTMLPictureElement && h ? !n.hasHDescriptorFix && t.msElementsFromPoint && (n.hasHDescriptorFix = !0, y()) : e.picturefill || f.pf || (f.pf = function(t) {
      var n, r;
      if (!e.picturefill)
          for (n = 0, r = t.elements.length; n < r; n++) o(t.elements[n])
  }, c = /^\s*\d+\.*\d*px\s*$/, s = /(([^,\s].[^\s]+)\s+(\d+)w)/g, l = /\s/, u = function() {
      var e, n;

      function r() {
          for (var e = 0, t = n.length; e < t; e++) o(n[e])
      }
      u.init || (u.init = !0, addEventListener("resize", (n = t.getElementsByClassName("lazymatchmedia"), function() {
          clearTimeout(e), e = setTimeout(r, 66)
      })))
  }, m = function(t) {
      return e.matchMedia ? (m = function(e) {
          return !e || (matchMedia(e) || {}).matches
      })(t) : !t
  }, E.parse = d = function(e) {
      return a = [], (e = e.trim()).replace(v, "").replace(s, z), a.length || !e || l.test(e) || a.push({
          c: e,
          u: e,
          w: 99
      }), a
  }, o = E, f.loadedClass && f.loadingClass && (p = [], ['img[sizes$="px"][srcset].', "picture > img:not([srcset])."].forEach((function(e) {
      p.push(e + f.loadedClass), p.push(e + f.loadingClass)
  })), f.pf({
      elements: t.querySelectorAll(p.join(", "))
  })))
})), adjustForNav();
var x = window.matchMedia("(max-width: 1421px)");
zoomableImageSetup(x);
var windowHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight),
  windowWidth = window.innerWidth,
  resize;
if (windowWidth <= 600) var mobile = !0;
else var mobile = !1;

function onResize() {
  Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight);
  var e = window.innerWidth;
  mobile = e <= 600
}
window.onresize = function() {
  clearTimeout(resize), resize = setTimeout(onResize, 300)
};
var scrollContainersScrollers = [],
  scrollers = [];

function handleStepProgress(response) {
  if (response.element.hasAttribute("data-on-progress")) {
      var callbackFunction = response.element.getAttribute("data-on-progress");
      eval(callbackFunction)
  }
}

function handleStepEnter(response) {
  if (response.element.hasAttribute("data-on-enter")) {
      var callbackFunction = response.element.getAttribute("data-on-enter");
      eval(callbackFunction)
  }
  let container = response.element.parentNode.querySelector(".SA_scrollytelling-images");
  var images = container.querySelectorAll(".SA_fullscreen-image");
  exists(images[response.index]) ? images[response.index].classList.add("SA_active-slide") : 1 != images.length || images[0].classList.contains("SA_active-slide") || images[0].classList.add("SA_active-slide")
}

function handleStepExit(response) {
  if (response.element.hasAttribute("data-on-exit")) {
      var callbackFunction = response.element.getAttribute("data-on-exit");
      eval(callbackFunction)
  }
  let container = response.element.parentNode.querySelector(".SA_scrollytelling-images"),
      wrapper = container.parentNode;
  var images = container.querySelectorAll(".SA_fullscreen-image");
  exists(images[response.index]) && 1 != images.length ? images[response.index] != images[images.length - 1] ? images[response.index].classList.remove("SA_active-slide") : wrapper.classList.contains("SA_scrollytelling-wrapper--scroll-in") && response.index == images.length - 1 ? "up" == response.direction && images[response.index].classList.remove("SA_active-slide") : images[response.index].classList.remove("SA_active-slide") : (1 == images.length && response.index == wrapper.querySelectorAll(".SA_scrollytelling-slide").length - 1 || 0 == response.index) && images[0].classList.remove("SA_active-slide")
}

function init(e) {
  if (document.querySelector(".SA_scrolltelling-section-" + e).hasAttribute("data-on-enter") || document.querySelector(".SA_scrolltelling-section-" + e).hasAttribute("data-on-exit") || document.querySelector(".SA_scrolltelling-section-" + e).hasAttribute("data-on-progress")) {
      var t = !1;
      document.querySelector(".SA_scrolltelling-section-" + e).hasAttribute("data-on-progress") && (t = !0), scrollContainersScrollers[e] = scrollama(), scrollContainersScrollers[e].setup({
          step: ".SA_scrollytelling-wrapper",
          progress: t,
          debug: !1
      }).onStepProgress(handleStepProgress).onStepEnter(handleStepEnter).onStepExit(handleStepExit)
  }
  for (var n = !1, o = document.querySelector(".SA_scrolltelling-section-" + e).querySelectorAll(".SA_scrollytelling-slide"), r = o.length - 1; r >= 0; r--) o[r].hasAttribute("data-on-progress") && (n = !0);
  var i = ".SA_scrolltelling-section-" + e + " .SA_scrollytelling-slide";
  scrollers[e] = scrollama(), scrollers[e].setup({
      step: i,
      progress: n,
      debug: !1
  }).onStepProgress(handleStepProgress).onStepEnter(handleStepEnter).onStepExit(handleStepExit)
}
let scrollContainers = document.querySelectorAll(".SA_scrollytelling-wrapper");
for (var i = scrollContainers.length - 1; i >= 0; i--) scrollContainers[i].classList.add("SA_scrolltelling-section-" + i), init(i);
var onEnterElements = [];
let onEnterContainers = document.querySelectorAll(".SA_animate");
for (var i = onEnterContainers.length - 1; i >= 0; i--) initOnEnter(i);

function initOnEnter(e) {
  onEnterElements[e] = scrollama(), onEnterElements[e].setup({
      step: ".SA_animate",
      progress: !1,
      debug: !1,
      offset: .6
  }).onStepEnter(onEnterElementEnter).onStepExit(onEnterElementExit)
}

function onEnterElementEnter(response) {
  if (response.element.hasAttribute("data-on-enter")) {
      var callbackFunction = response.element.getAttribute("data-on-enter");
      eval(callbackFunction)
  }
  response.element.classList.add("SA_active")
}

function onEnterElementExit(response) {
  if ("up" == response.direction) {
      if (response.element.hasAttribute("data-on-exit")) {
          var callbackFunction = response.element.getAttribute("data-on-exit");
          eval(callbackFunction)
      }
      response.element.classList.remove("SA_active")
  }
}
mapboxgl.accessToken = "pk.eyJ1IjoidG9yb250b3N0YXIiLCJhIjoicjB0aUZoayJ9.kA7XwicoTQeHbRCo5dzjkw";
const map = new mapboxgl.Map({
      container: "map",
      style: "mapbox://styles/mapbox/dark-v11",
      center: [-79.35799163181483, 43.69169614052828],
      zoom: 11.042327120629595,
      projection: "mercator"
  }),
  stepper = {
      currentStep: 1,
      totalSteps: null,
      updatePagination: function() {
          pagination.innerHTML = stepper.currentStep + "/" + stepper.totalSteps
      },
      updateText: function() {
          titleEl.innerHTML = stepper[stepper.currentStep].title, descEl.innerHTML = stepper[stepper.currentStep].description
      },
      1: {
          title: "Story Title 1",
          description: "Here is New York City, a region of 18 million people. Each dot represents 1,000,000 square meters. Deeper shades of red represent more people.",
          function: function() {
              console.log("Step 1 function ran successfully"), map.flyTo({
                  center: [-79.35799163181483, 43.69169614052828],
                  zoom: 11.042327120629595,
                  essential: !0
              })
          }
      },
      2: {
          title: "Story Title 2",
          description: "Here is New York City, a region of 18 million people. Each dot represents 1,000,000 square meters. Deeper shades of red represent more people.",
          function: function() {
              console.log("Step 1 function ran successfully"), map.flyTo({
                  center: [-79.35799163181483, 43.69169614052828],
                  zoom: 11.042327120629595,
                  essential: !0
              })
          }
      },
      3: {
          title: "Story Title 3",
          description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.",
          function: function() {
              console.log("Step 2 function ran successfully"), map.flyTo({
                  center: [-123.116226, 49.246292],
                  zoom: 11.042327120629595,
                  essential: !0
              })
          }
      }
  },
  pagination = document.querySelector("#SA_pagination"),
  leftButton = document.querySelector("#SA_button-left"),
  rightButton = document.querySelector("#SA_button-right"),
  titleEl = document.querySelector(".SA_nav-title"),
  descEl = document.querySelector(".SA_nav-desc");
leftButton.addEventListener("click", (e => {
  stepper.currentStep--, stepper.updatePagination(), stepper.updateText(), rightButton.disabled = !1, 1 === stepper.currentStep && (leftButton.disabled = !0), stepper[stepper.currentStep].function()
})), rightButton.addEventListener("click", (e => {
  stepper.currentStep++, stepper.updatePagination(), stepper.updateText(), leftButton.disabled = !1, stepper.currentStep === stepper.totalSteps && (rightButton.disabled = !0), stepper[stepper.currentStep].function()
})), stepper.totalSteps = Object.keys(stepper).length - 4, stepper.updatePagination(), stepper.updateText();